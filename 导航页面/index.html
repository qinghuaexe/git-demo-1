<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>导航页面</title>
    <link rel="stylesheet" href="./style.css">
</head>
<header></header>
<main >
    <div class="wrapper" id="zhangsan">
    </div>
</main>
<footer></footer>
<script>
    var keys = {
       '0':{0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
       '1':{0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
       '2':{0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
       length:3
    }
    var hash = {
        q:'qq.com',
        w:'weibo.com',
        e:'ele.com',
        r:'renren.com',
        t:'tianya.com',
        y:'youtube.com',
        u:'uc.com',
        i:'iqiyi.com',
        o:'opera.com',
        p:undefined,
        a:'acfun.tv',
        s:'sohu.com',
        z:'zhihu.com',
    }
    var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null')
    if(hashInLocalStorage){
        hash = hashInLocalStorage
    }
    index = 0
    while(index< keys['length']){
    div1 = document.createElement('div')
    div1.className = 'row'
    zhangsan.appendChild(div1)
    row = keys[index]
    index2 = 0
    while(index2< row['length']){
        z = document.createElement('kbd')
        span=document.createElement('span')
        span.textContent = row[index2]
        span.className='text'
        z.appendChild(span)
        z.className ='key'
        buttonX = document.createElement('button')
        buttonX.textContent = '编辑'
        buttonX.id = row[index2]
        img =document.createElement('img')
        if(hash[row[index2]]){
        img.src = 'http://' + hash[row[index2]] + '/favicon.ico'
        }
        else{
            img.src ='https://i.loli.net/2017/11/10/5a05afbc5e183.png'
        }
           img.onerror = function(xxx){
            xxx.target.src = 'https://i.loli.net/2017/11/10/5a05afbc5e183.png'   
           }
        
        buttonX.onclick = function(xyz){
           // console.log(xyz['target']['id'])
           button2 =xyz['target']
           img2 =button2.previousSibling
           key = button2['id']
           x = prompt('给我一个网址')
           hash[key] = x
           img2.src = 'http://' + x + '/favicon.ico'
           img2.onerror = function(xxx){
             xxx.target.src = 'https://i.loli.net/2017/11/10/5a05afbc5e183.png'  
           }
           localStorage.setItem('zzz',JSON.stringify (hash))
           console.log(hash)
        }
        z.appendChild(img)
        z.appendChild(buttonX) 
        div1.appendChild(z)
       index2 = index2 + 1
    }
    index = index+1
    }
    document.onkeypress =function(xyz){
      key = xyz['key']
      website = hash[key]
      console.log(website)
      //location.href = 'http://'+ website
      window.open('http://' + website, '_blank')
    }
</script>
<body>
    
</body>
</html>